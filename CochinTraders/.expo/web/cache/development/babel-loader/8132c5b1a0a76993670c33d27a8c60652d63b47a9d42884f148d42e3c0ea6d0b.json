{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useState, useEffect, useCallback } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport RefreshControl from \"react-native-web/dist/exports/RefreshControl\";\nimport { Card, Paragraph, Title, ActivityIndicator } from 'react-native-paper';\nimport axios from 'axios';\nimport { API_BASE } from \"../App\";\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nexport default function StocksScreen(_ref) {\n  var company = _ref.company;\n  var _useState = useState([]),\n    _useState2 = _slicedToArray(_useState, 2),\n    stocks = _useState2[0],\n    setStocks = _useState2[1];\n  var _useState3 = useState(false),\n    _useState4 = _slicedToArray(_useState3, 2),\n    loading = _useState4[0],\n    setLoading = _useState4[1];\n  var fetchStocks = useCallback(_asyncToGenerator(function* () {\n    if (!company) return;\n    setLoading(true);\n    try {\n      var res = yield axios.get(API_BASE + \"/api/stocks/\" + encodeURIComponent(company));\n      if (res.data && res.data.data) setStocks(res.data.data);\n    } catch (e) {\n      console.warn('Failed to load stocks:', e.message);\n    }\n    setLoading(false);\n  }), [company]);\n  useEffect(function () {\n    fetchStocks();\n  }, [company]);\n  if (!company) return null;\n  return _jsxs(View, {\n    style: {\n      flex: 1,\n      padding: 8\n    },\n    children: [loading && _jsx(ActivityIndicator, {\n      animating: true\n    }), _jsx(FlatList, {\n      data: stocks,\n      keyExtractor: function keyExtractor(item, i) {\n        return (item.StockName || 'stock') + \"-\" + i;\n      },\n      refreshControl: _jsx(RefreshControl, {\n        refreshing: loading,\n        onRefresh: fetchStocks\n      }),\n      renderItem: function renderItem(_ref3) {\n        var _item$ClosingQty, _item$ClosingRate, _item$ClosingValue;\n        var item = _ref3.item;\n        return _jsx(Card, {\n          style: {\n            marginBottom: 8\n          },\n          children: _jsxs(Card.Content, {\n            children: [_jsx(Title, {\n              children: item.StockName\n            }), _jsxs(Paragraph, {\n              children: [\"Category: \", item.Category || '-']\n            }), _jsxs(Paragraph, {\n              children: [\"Qty: \", (_item$ClosingQty = item.ClosingQty) != null ? _item$ClosingQty : 0, \" \", item.Unit || '']\n            }), _jsxs(Paragraph, {\n              children: [\"Rate: \", (_item$ClosingRate = item.ClosingRate) != null ? _item$ClosingRate : 0, \" | Value: \", (_item$ClosingValue = item.ClosingValue) != null ? _item$ClosingValue : 0]\n            })]\n          })\n        });\n      }\n    })]\n  });\n}","map":{"version":3,"names":["React","useState","useEffect","useCallback","View","FlatList","RefreshControl","Card","Paragraph","Title","ActivityIndicator","axios","API_BASE","jsx","_jsx","jsxs","_jsxs","StocksScreen","_ref","company","_useState","_useState2","_slicedToArray","stocks","setStocks","_useState3","_useState4","loading","setLoading","fetchStocks","_asyncToGenerator","res","get","encodeURIComponent","data","e","console","warn","message","style","flex","padding","children","animating","keyExtractor","item","i","StockName","refreshControl","refreshing","onRefresh","renderItem","_ref3","_item$ClosingQty","_item$ClosingRate","_item$ClosingValue","marginBottom","Content","Category","ClosingQty","Unit","ClosingRate","ClosingValue"],"sources":["C:/Users/Vishnu Rajagopal/OneDrive/Desktop/Tally Connect/CochinTraders/screens/StocksScreen.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react'\r\nimport { View, FlatList, RefreshControl } from 'react-native'\r\nimport { Card, Paragraph, Title, ActivityIndicator } from 'react-native-paper'\r\nimport axios from 'axios'\r\nimport { API_BASE } from '../App'\r\n\r\nexport default function StocksScreen({ company }) {\r\n  const [stocks, setStocks] = useState([])\r\n  const [loading, setLoading] = useState(false)\r\n\r\n  const fetchStocks = useCallback(async () => {\r\n    if (!company) return\r\n    setLoading(true)\r\n    try {\r\n      const res = await axios.get(`${API_BASE}/api/stocks/${encodeURIComponent(company)}`)\r\n      if (res.data && res.data.data) setStocks(res.data.data)\r\n    } catch (e) {\r\n      console.warn('Failed to load stocks:', e.message)\r\n    }\r\n    setLoading(false)\r\n  }, [company])\r\n\r\n  useEffect(() => { fetchStocks() }, [company])\r\n\r\n  if (!company) return null\r\n\r\n  return (\r\n    <View style={{ flex: 1, padding: 8 }}>\r\n      {loading && <ActivityIndicator animating />}\r\n      <FlatList\r\n        data={stocks}\r\n        keyExtractor={(item, i) => `${item.StockName || 'stock'}-${i}`}\r\n        refreshControl={<RefreshControl refreshing={loading} onRefresh={fetchStocks} />}\r\n        renderItem={({ item }) => (\r\n          <Card style={{ marginBottom: 8 }}>\r\n            <Card.Content>\r\n              <Title>{item.StockName}</Title>\r\n              <Paragraph>Category: {item.Category || '-'}</Paragraph>\r\n              <Paragraph>Qty: {item.ClosingQty ?? 0} {item.Unit || ''}</Paragraph>\r\n              <Paragraph>Rate: {item.ClosingRate ?? 0} | Value: {item.ClosingValue ?? 0}</Paragraph>\r\n            </Card.Content>\r\n          </Card>\r\n        )}\r\n      />\r\n    </View>\r\n  )\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}