{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useState, useEffect, useCallback } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport RefreshControl from \"react-native-web/dist/exports/RefreshControl\";\nimport { Card, Title, Paragraph, ActivityIndicator } from 'react-native-paper';\nimport axios from 'axios';\nimport { API_BASE } from \"../App\";\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nexport default function SundryDebtorsScreen(_ref) {\n  var company = _ref.company;\n  var _useState = useState([]),\n    _useState2 = _slicedToArray(_useState, 2),\n    debtors = _useState2[0],\n    setDebtors = _useState2[1];\n  var _useState3 = useState(false),\n    _useState4 = _slicedToArray(_useState3, 2),\n    loading = _useState4[0],\n    setLoading = _useState4[1];\n  var fetchDebtors = useCallback(_asyncToGenerator(function* () {\n    if (!company) return;\n    setLoading(true);\n    try {\n      var res = yield axios.get(API_BASE + \"/api/parties/\" + encodeURIComponent(company));\n      var data = res.data && res.data.data ? res.data.data : [];\n      var onlyDebtors = data.filter(function (p) {\n        return (p.PrimaryGroup || p.PartyType || '').toLowerCase().includes('sundry debt');\n      });\n      setDebtors(onlyDebtors);\n    } catch (e) {\n      console.warn('Failed to load parties:', e.message);\n    }\n    setLoading(false);\n  }), [company]);\n  useEffect(function () {\n    fetchDebtors();\n  }, [company]);\n  if (!company) return null;\n  return _jsxs(View, {\n    style: {\n      flex: 1,\n      padding: 8\n    },\n    children: [loading && _jsx(ActivityIndicator, {\n      animating: true\n    }), _jsx(FlatList, {\n      data: debtors,\n      keyExtractor: function keyExtractor(item, i) {\n        return (item.PartyName || 'party') + \"-\" + i;\n      },\n      refreshControl: _jsx(RefreshControl, {\n        refreshing: loading,\n        onRefresh: fetchDebtors\n      }),\n      renderItem: function renderItem(_ref3) {\n        var _ref4, _item$Balance;\n        var item = _ref3.item;\n        return _jsx(Card, {\n          style: {\n            marginBottom: 8\n          },\n          children: _jsxs(Card.Content, {\n            children: [_jsx(Title, {\n              children: item.PartyName\n            }), _jsxs(Paragraph, {\n              children: [\"Group: \", item.PrimaryGroup || item.PartyType || '-']\n            }), _jsxs(Paragraph, {\n              children: [\"Balance: \", (_ref4 = (_item$Balance = item.Balance) != null ? _item$Balance : item.ClosingBalance) != null ? _ref4 : 0]\n            }), _jsxs(Paragraph, {\n              children: [\"Contact: \", item.ContactPerson || item.Phone || '-']\n            })]\n          })\n        });\n      }\n    })]\n  });\n}","map":{"version":3,"names":["React","useState","useEffect","useCallback","View","FlatList","RefreshControl","Card","Title","Paragraph","ActivityIndicator","axios","API_BASE","jsx","_jsx","jsxs","_jsxs","SundryDebtorsScreen","_ref","company","_useState","_useState2","_slicedToArray","debtors","setDebtors","_useState3","_useState4","loading","setLoading","fetchDebtors","_asyncToGenerator","res","get","encodeURIComponent","data","onlyDebtors","filter","p","PrimaryGroup","PartyType","toLowerCase","includes","e","console","warn","message","style","flex","padding","children","animating","keyExtractor","item","i","PartyName","refreshControl","refreshing","onRefresh","renderItem","_ref3","_ref4","_item$Balance","marginBottom","Content","Balance","ClosingBalance","ContactPerson","Phone"],"sources":["C:/Users/Vishnu Rajagopal/OneDrive/Desktop/Tally Connect/CochinTraders/screens/SundryDebtorsScreen.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react'\r\nimport { View, FlatList, RefreshControl } from 'react-native'\r\nimport { Card, Title, Paragraph, ActivityIndicator } from 'react-native-paper'\r\nimport axios from 'axios'\r\nimport { API_BASE } from '../App'\r\n\r\nexport default function SundryDebtorsScreen({ company }) {\r\n  const [debtors, setDebtors] = useState([])\r\n  const [loading, setLoading] = useState(false)\r\n\r\n  const fetchDebtors = useCallback(async () => {\r\n    if (!company) return\r\n    setLoading(true)\r\n    try {\r\n      const res = await axios.get(`${API_BASE}/api/parties/${encodeURIComponent(company)}`)\r\n      const data = res.data && res.data.data ? res.data.data : []\r\n      // Filter only Sundry Debtors\r\n      const onlyDebtors = data.filter(p => (p.PrimaryGroup || p.PartyType || '').toLowerCase().includes('sundry debt'))\r\n      setDebtors(onlyDebtors)\r\n    } catch (e) {\r\n      console.warn('Failed to load parties:', e.message)\r\n    }\r\n    setLoading(false)\r\n  }, [company])\r\n\r\n  useEffect(() => { fetchDebtors() }, [company])\r\n\r\n  if (!company) return null\r\n\r\n  return (\r\n    <View style={{ flex: 1, padding: 8 }}>\r\n      {loading && <ActivityIndicator animating />}\r\n      <FlatList\r\n        data={debtors}\r\n        keyExtractor={(item, i) => `${item.PartyName || 'party'}-${i}`}\r\n        refreshControl={<RefreshControl refreshing={loading} onRefresh={fetchDebtors} />}\r\n        renderItem={({ item }) => (\r\n          <Card style={{ marginBottom: 8 }}>\r\n            <Card.Content>\r\n              <Title>{item.PartyName}</Title>\r\n              <Paragraph>Group: {item.PrimaryGroup || item.PartyType || '-'}</Paragraph>\r\n              <Paragraph>Balance: {item.Balance ?? item.ClosingBalance ?? 0}</Paragraph>\r\n              <Paragraph>Contact: {item.ContactPerson || item.Phone || '-'}</Paragraph>\r\n            </Card.Content>\r\n          </Card>\r\n        )}\r\n      />\r\n    </View>\r\n  )\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}