{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useEffect, useState } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport { Button, Menu, Text } from 'react-native-paper';\nimport axios from 'axios';\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nexport default function CompanyPicker(_ref) {\n  var apiBase = _ref.apiBase,\n    value = _ref.value,\n    onChange = _ref.onChange;\n  var _useState = useState(false),\n    _useState2 = _slicedToArray(_useState, 2),\n    visible = _useState2[0],\n    setVisible = _useState2[1];\n  var _useState3 = useState([]),\n    _useState4 = _slicedToArray(_useState3, 2),\n    companies = _useState4[0],\n    setCompanies = _useState4[1];\n  var _useState5 = useState(false),\n    _useState6 = _slicedToArray(_useState5, 2),\n    loading = _useState6[0],\n    setLoading = _useState6[1];\n  useEffect(function () {\n    fetchCompanies();\n  }, []);\n  function fetchCompanies() {\n    return _fetchCompanies.apply(this, arguments);\n  }\n  function _fetchCompanies() {\n    _fetchCompanies = _asyncToGenerator(function* () {\n      setLoading(true);\n      try {\n        var res = yield axios.get(apiBase + \"/api/company-names\");\n        if (res.data && res.data.data) setCompanies(res.data.data.map(function (c) {\n          return c.companyName;\n        }));\n      } catch (e) {\n        console.warn('Could not fetch companies:', e.message);\n      }\n      setLoading(false);\n    });\n    return _fetchCompanies.apply(this, arguments);\n  }\n  var openMenu = function openMenu() {\n    return setVisible(true);\n  };\n  var closeMenu = function closeMenu() {\n    return setVisible(false);\n  };\n  return _jsxs(View, {\n    style: styles.row,\n    children: [_jsxs(Menu, {\n      visible: visible,\n      onDismiss: closeMenu,\n      anchor: _jsx(Button, {\n        onPress: openMenu,\n        children: value || 'Choose company'\n      }),\n      children: [loading && _jsx(Menu.Item, {\n        title: \"Loading...\"\n      }), !loading && companies.length === 0 && _jsx(Menu.Item, {\n        title: \"No companies\"\n      }), companies.map(function (c) {\n        return _jsx(Menu.Item, {\n          onPress: function onPress() {\n            onChange(c);\n            closeMenu();\n          },\n          title: c\n        }, c);\n      })]\n    }), _jsx(Button, {\n      mode: \"outlined\",\n      onPress: fetchCompanies,\n      compact: true,\n      children: \"Refresh\"\n    })]\n  });\n}\nvar styles = StyleSheet.create({\n  row: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 8\n  }\n});","map":{"version":3,"names":["React","useEffect","useState","View","StyleSheet","Button","Menu","Text","axios","jsx","_jsx","jsxs","_jsxs","CompanyPicker","_ref","apiBase","value","onChange","_useState","_useState2","_slicedToArray","visible","setVisible","_useState3","_useState4","companies","setCompanies","_useState5","_useState6","loading","setLoading","fetchCompanies","_fetchCompanies","apply","arguments","_asyncToGenerator","res","get","data","map","c","companyName","e","console","warn","message","openMenu","closeMenu","style","styles","row","children","onDismiss","anchor","onPress","Item","title","length","mode","compact","create","flexDirection","alignItems","gap"],"sources":["C:/Users/Vishnu Rajagopal/OneDrive/Desktop/Tally Connect/CochinTraders/components/CompanyPicker.js"],"sourcesContent":["import React, { useEffect, useState } from 'react'\r\nimport { View, StyleSheet } from 'react-native'\r\nimport { Button, Menu, Text } from 'react-native-paper'\r\nimport axios from 'axios'\r\n\r\nexport default function CompanyPicker({ apiBase, value, onChange }) {\r\n  const [visible, setVisible] = useState(false)\r\n  const [companies, setCompanies] = useState([])\r\n  const [loading, setLoading] = useState(false)\r\n\r\n  useEffect(() => {\r\n    fetchCompanies()\r\n  }, [])\r\n\r\n  async function fetchCompanies() {\r\n    setLoading(true)\r\n    try {\r\n      const res = await axios.get(`${apiBase}/api/company-names`)\r\n      if (res.data && res.data.data) setCompanies(res.data.data.map(c => c.companyName))\r\n    } catch (e) {\r\n      console.warn('Could not fetch companies:', e.message)\r\n    }\r\n    setLoading(false)\r\n  }\r\n\r\n  const openMenu = () => setVisible(true)\r\n  const closeMenu = () => setVisible(false)\r\n\r\n  return (\r\n    <View style={styles.row}>\r\n      <Menu visible={visible} onDismiss={closeMenu} anchor={<Button onPress={openMenu}>{value || 'Choose company'}</Button>}>\r\n        {loading && <Menu.Item title=\"Loading...\" />}\r\n        {!loading && companies.length === 0 && <Menu.Item title=\"No companies\" />}\r\n        {companies.map(c => (\r\n          <Menu.Item key={c} onPress={() => { onChange(c); closeMenu() }} title={c} />\r\n        ))}\r\n      </Menu>\r\n      <Button mode=\"outlined\" onPress={fetchCompanies} compact>Refresh</Button>\r\n    </View>\r\n  )\r\n}\r\n\r\nconst styles = StyleSheet.create({ row: { flexDirection: 'row', alignItems: 'center', gap: 8 } })\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}